{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "description": "Defines a KubeVela Application resource (OAM Application). Schemas generated from live cluster.",
  "properties": {
    "apiVersion": {
      "const": "core.oam.dev/v1beta1",
      "description": "Must be 'core.oam.dev/v1beta1'.",
      "type": "string"
    },
    "kind": {
      "const": "Application",
      "description": "Must be 'Application'. Other OAM kinds (ComponentDefinition, TraitDefinition) are for platform operators.",
      "type": "string"
    },
    "metadata": {
      "description": "Standard Kubernetes object metadata.",
      "properties": {
        "annotations": {
          "additionalProperties": {
            "type": "string"
          },
          "description": "Key-value annotations attached to this Application resource.",
          "type": "object"
        },
        "labels": {
          "additionalProperties": {
            "type": "string"
          },
          "description": "Key-value labels attached to this Application resource.",
          "type": "object"
        },
        "name": {
          "description": "The application name. Used as the Kubernetes resource name.",
          "type": "string"
        },
        "namespace": {
          "description": "Kubernetes namespace to deploy into. Defaults to the cluster default.",
          "type": "string"
        }
      },
      "required": [
        "name"
      ],
      "type": "object"
    },
    "spec": {
      "description": "The desired state of the Application.",
      "properties": {
        "components": {
          "description": "The list of workload components that make up this application.",
          "items": {
            "allOf": [
              {
                "if": {
                  "properties": {
                    "type": {
                      "const": "cron-task"
                    }
                  },
                  "required": [
                    "type"
                  ]
                },
                "then": {
                  "properties": {
                    "properties": {
                      "$ref": "component-schema-cron-task-schema.json"
                    }
                  }
                }
              },
              {
                "if": {
                  "properties": {
                    "type": {
                      "const": "daemon"
                    }
                  },
                  "required": [
                    "type"
                  ]
                },
                "then": {
                  "properties": {
                    "properties": {
                      "$ref": "component-schema-daemon-schema.json"
                    }
                  }
                }
              },
              {
                "if": {
                  "properties": {
                    "type": {
                      "const": "k8s-objects"
                    }
                  },
                  "required": [
                    "type"
                  ]
                },
                "then": {
                  "properties": {
                    "properties": {
                      "$ref": "component-schema-k8s-objects-schema.json"
                    }
                  }
                }
              },
              {
                "if": {
                  "properties": {
                    "type": {
                      "const": "raw"
                    }
                  },
                  "required": [
                    "type"
                  ]
                },
                "then": {
                  "properties": {
                    "properties": {
                      "$ref": "component-schema-raw-schema.json"
                    }
                  }
                }
              },
              {
                "if": {
                  "properties": {
                    "type": {
                      "const": "ref-objects"
                    }
                  },
                  "required": [
                    "type"
                  ]
                },
                "then": {
                  "properties": {
                    "properties": {
                      "$ref": "component-schema-ref-objects-schema.json"
                    }
                  }
                }
              },
              {
                "if": {
                  "properties": {
                    "type": {
                      "const": "statefulset"
                    }
                  },
                  "required": [
                    "type"
                  ]
                },
                "then": {
                  "properties": {
                    "properties": {
                      "$ref": "component-schema-statefulset-schema.json"
                    }
                  }
                }
              },
              {
                "if": {
                  "properties": {
                    "type": {
                      "const": "task"
                    }
                  },
                  "required": [
                    "type"
                  ]
                },
                "then": {
                  "properties": {
                    "properties": {
                      "$ref": "component-schema-task-schema.json"
                    }
                  }
                }
              },
              {
                "if": {
                  "properties": {
                    "type": {
                      "const": "webservice"
                    }
                  },
                  "required": [
                    "type"
                  ]
                },
                "then": {
                  "properties": {
                    "properties": {
                      "$ref": "component-schema-webservice-schema.json"
                    }
                  }
                }
              },
              {
                "if": {
                  "properties": {
                    "type": {
                      "const": "worker"
                    }
                  },
                  "required": [
                    "type"
                  ]
                },
                "then": {
                  "properties": {
                    "properties": {
                      "$ref": "component-schema-worker-schema.json"
                    }
                  }
                }
              }
            ],
            "description": "A single workload component of the application.",
            "properties": {
              "dependsOn": {
                "description": "Names of other components in the same application that must be deployed first.",
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              "externalRevision": {
                "description": "Pin to a specific component revision by name.",
                "type": "string"
              },
              "name": {
                "description": "A unique name for this component instance within the application.",
                "type": "string"
              },
              "properties": {
                "description": "Component-specific properties. Set 'type' first, then Ctrl+Space here for field hints.",
                "type": "object"
              },
              "traits": {
                "description": "Operational traits to attach to this component (ingress, scaler, resource limits, etc.).",
                "items": {
                  "allOf": [
                    {
                      "if": {
                        "properties": {
                          "type": {
                            "const": "affinity"
                          }
                        },
                        "required": [
                          "type"
                        ]
                      },
                      "then": {
                        "properties": {
                          "properties": {
                            "$ref": "trait-schema-affinity-schema.json"
                          }
                        }
                      }
                    },
                    {
                      "if": {
                        "properties": {
                          "type": {
                            "const": "annotations"
                          }
                        },
                        "required": [
                          "type"
                        ]
                      },
                      "then": {
                        "properties": {
                          "properties": {
                            "$ref": "trait-schema-annotations-schema.json"
                          }
                        }
                      }
                    },
                    {
                      "if": {
                        "properties": {
                          "type": {
                            "const": "command"
                          }
                        },
                        "required": [
                          "type"
                        ]
                      },
                      "then": {
                        "properties": {
                          "properties": {
                            "$ref": "trait-schema-command-schema.json"
                          }
                        }
                      }
                    },
                    {
                      "if": {
                        "properties": {
                          "type": {
                            "const": "configmap"
                          }
                        },
                        "required": [
                          "type"
                        ]
                      },
                      "then": {
                        "properties": {
                          "properties": {
                            "$ref": "trait-schema-configmap-schema.json"
                          }
                        }
                      }
                    },
                    {
                      "if": {
                        "properties": {
                          "type": {
                            "const": "container-image"
                          }
                        },
                        "required": [
                          "type"
                        ]
                      },
                      "then": {
                        "properties": {
                          "properties": {
                            "$ref": "trait-schema-container-image-schema.json"
                          }
                        }
                      }
                    },
                    {
                      "if": {
                        "properties": {
                          "type": {
                            "const": "container-ports"
                          }
                        },
                        "required": [
                          "type"
                        ]
                      },
                      "then": {
                        "properties": {
                          "properties": {
                            "$ref": "trait-schema-container-ports-schema.json"
                          }
                        }
                      }
                    },
                    {
                      "if": {
                        "properties": {
                          "type": {
                            "const": "cpuscaler"
                          }
                        },
                        "required": [
                          "type"
                        ]
                      },
                      "then": {
                        "properties": {
                          "properties": {
                            "$ref": "trait-schema-cpuscaler-schema.json"
                          }
                        }
                      }
                    },
                    {
                      "if": {
                        "properties": {
                          "type": {
                            "const": "env"
                          }
                        },
                        "required": [
                          "type"
                        ]
                      },
                      "then": {
                        "properties": {
                          "properties": {
                            "$ref": "trait-schema-env-schema.json"
                          }
                        }
                      }
                    },
                    {
                      "if": {
                        "properties": {
                          "type": {
                            "const": "expose"
                          }
                        },
                        "required": [
                          "type"
                        ]
                      },
                      "then": {
                        "properties": {
                          "properties": {
                            "$ref": "trait-schema-expose-schema.json"
                          }
                        }
                      }
                    },
                    {
                      "if": {
                        "properties": {
                          "type": {
                            "const": "gateway"
                          }
                        },
                        "required": [
                          "type"
                        ]
                      },
                      "then": {
                        "properties": {
                          "properties": {
                            "$ref": "trait-schema-gateway-schema.json"
                          }
                        }
                      }
                    },
                    {
                      "if": {
                        "properties": {
                          "type": {
                            "const": "hostalias"
                          }
                        },
                        "required": [
                          "type"
                        ]
                      },
                      "then": {
                        "properties": {
                          "properties": {
                            "$ref": "trait-schema-hostalias-schema.json"
                          }
                        }
                      }
                    },
                    {
                      "if": {
                        "properties": {
                          "type": {
                            "const": "hpa"
                          }
                        },
                        "required": [
                          "type"
                        ]
                      },
                      "then": {
                        "properties": {
                          "properties": {
                            "$ref": "trait-schema-hpa-schema.json"
                          }
                        }
                      }
                    },
                    {
                      "if": {
                        "properties": {
                          "type": {
                            "const": "ingress"
                          }
                        },
                        "required": [
                          "type"
                        ]
                      },
                      "then": {
                        "properties": {
                          "properties": {
                            "$ref": "trait-schema-ingress-schema.json"
                          }
                        }
                      }
                    },
                    {
                      "if": {
                        "properties": {
                          "type": {
                            "const": "ingress-1-20"
                          }
                        },
                        "required": [
                          "type"
                        ]
                      },
                      "then": {
                        "properties": {
                          "properties": {
                            "$ref": "trait-schema-ingress-1-20-schema.json"
                          }
                        }
                      }
                    },
                    {
                      "if": {
                        "properties": {
                          "type": {
                            "const": "init-container"
                          }
                        },
                        "required": [
                          "type"
                        ]
                      },
                      "then": {
                        "properties": {
                          "properties": {
                            "$ref": "trait-schema-init-container-schema.json"
                          }
                        }
                      }
                    },
                    {
                      "if": {
                        "properties": {
                          "type": {
                            "const": "json-merge-patch"
                          }
                        },
                        "required": [
                          "type"
                        ]
                      },
                      "then": {
                        "properties": {
                          "properties": {
                            "$ref": "trait-schema-json-merge-patch-schema.json"
                          }
                        }
                      }
                    },
                    {
                      "if": {
                        "properties": {
                          "type": {
                            "const": "json-patch"
                          }
                        },
                        "required": [
                          "type"
                        ]
                      },
                      "then": {
                        "properties": {
                          "properties": {
                            "$ref": "trait-schema-json-patch-schema.json"
                          }
                        }
                      }
                    },
                    {
                      "if": {
                        "properties": {
                          "type": {
                            "const": "k8s-update-strategy"
                          }
                        },
                        "required": [
                          "type"
                        ]
                      },
                      "then": {
                        "properties": {
                          "properties": {
                            "$ref": "trait-schema-k8s-update-strategy-schema.json"
                          }
                        }
                      }
                    },
                    {
                      "if": {
                        "properties": {
                          "type": {
                            "const": "labels"
                          }
                        },
                        "required": [
                          "type"
                        ]
                      },
                      "then": {
                        "properties": {
                          "properties": {
                            "$ref": "trait-schema-labels-schema.json"
                          }
                        }
                      }
                    },
                    {
                      "if": {
                        "properties": {
                          "type": {
                            "const": "lifecycle"
                          }
                        },
                        "required": [
                          "type"
                        ]
                      },
                      "then": {
                        "properties": {
                          "properties": {
                            "$ref": "trait-schema-lifecycle-schema.json"
                          }
                        }
                      }
                    },
                    {
                      "if": {
                        "properties": {
                          "type": {
                            "const": "nocalhost"
                          }
                        },
                        "required": [
                          "type"
                        ]
                      },
                      "then": {
                        "properties": {
                          "properties": {
                            "$ref": "trait-schema-nocalhost-schema.json"
                          }
                        }
                      }
                    },
                    {
                      "if": {
                        "properties": {
                          "type": {
                            "const": "node-affinity"
                          }
                        },
                        "required": [
                          "type"
                        ]
                      },
                      "then": {
                        "properties": {
                          "properties": {
                            "$ref": "trait-schema-node-affinity-schema.json"
                          }
                        }
                      }
                    },
                    {
                      "if": {
                        "properties": {
                          "type": {
                            "const": "podsecuritycontext"
                          }
                        },
                        "required": [
                          "type"
                        ]
                      },
                      "then": {
                        "properties": {
                          "properties": {
                            "$ref": "trait-schema-podsecuritycontext-schema.json"
                          }
                        }
                      }
                    },
                    {
                      "if": {
                        "properties": {
                          "type": {
                            "const": "pure-ingress"
                          }
                        },
                        "required": [
                          "type"
                        ]
                      },
                      "then": {
                        "properties": {
                          "properties": {
                            "$ref": "trait-schema-pure-ingress-schema.json"
                          }
                        }
                      }
                    },
                    {
                      "if": {
                        "properties": {
                          "type": {
                            "const": "pvc"
                          }
                        },
                        "required": [
                          "type"
                        ]
                      },
                      "then": {
                        "properties": {
                          "properties": {
                            "$ref": "trait-schema-pvc-schema.json"
                          }
                        }
                      }
                    },
                    {
                      "if": {
                        "properties": {
                          "type": {
                            "const": "resource"
                          }
                        },
                        "required": [
                          "type"
                        ]
                      },
                      "then": {
                        "properties": {
                          "properties": {
                            "$ref": "trait-schema-resource-schema.json"
                          }
                        }
                      }
                    },
                    {
                      "if": {
                        "properties": {
                          "type": {
                            "const": "scaler"
                          }
                        },
                        "required": [
                          "type"
                        ]
                      },
                      "then": {
                        "properties": {
                          "properties": {
                            "$ref": "trait-schema-scaler-schema.json"
                          }
                        }
                      }
                    },
                    {
                      "if": {
                        "properties": {
                          "type": {
                            "const": "securitycontext"
                          }
                        },
                        "required": [
                          "type"
                        ]
                      },
                      "then": {
                        "properties": {
                          "properties": {
                            "$ref": "trait-schema-securitycontext-schema.json"
                          }
                        }
                      }
                    },
                    {
                      "if": {
                        "properties": {
                          "type": {
                            "const": "service-account"
                          }
                        },
                        "required": [
                          "type"
                        ]
                      },
                      "then": {
                        "properties": {
                          "properties": {
                            "$ref": "trait-schema-service-account-schema.json"
                          }
                        }
                      }
                    },
                    {
                      "if": {
                        "properties": {
                          "type": {
                            "const": "service-binding"
                          }
                        },
                        "required": [
                          "type"
                        ]
                      },
                      "then": {
                        "properties": {
                          "properties": {
                            "$ref": "trait-schema-service-binding-schema.json"
                          }
                        }
                      }
                    },
                    {
                      "if": {
                        "properties": {
                          "type": {
                            "const": "sidecar"
                          }
                        },
                        "required": [
                          "type"
                        ]
                      },
                      "then": {
                        "properties": {
                          "properties": {
                            "$ref": "trait-schema-sidecar-schema.json"
                          }
                        }
                      }
                    },
                    {
                      "if": {
                        "properties": {
                          "type": {
                            "const": "startup-probe"
                          }
                        },
                        "required": [
                          "type"
                        ]
                      },
                      "then": {
                        "properties": {
                          "properties": {
                            "$ref": "trait-schema-startup-probe-schema.json"
                          }
                        }
                      }
                    },
                    {
                      "if": {
                        "properties": {
                          "type": {
                            "const": "storage"
                          }
                        },
                        "required": [
                          "type"
                        ]
                      },
                      "then": {
                        "properties": {
                          "properties": {
                            "$ref": "trait-schema-storage-schema.json"
                          }
                        }
                      }
                    },
                    {
                      "if": {
                        "properties": {
                          "type": {
                            "const": "topologyspreadconstraints"
                          }
                        },
                        "required": [
                          "type"
                        ]
                      },
                      "then": {
                        "properties": {
                          "properties": {
                            "$ref": "trait-schema-topologyspreadconstraints-schema.json"
                          }
                        }
                      }
                    },
                    {
                      "if": {
                        "properties": {
                          "type": {
                            "const": "volumes"
                          }
                        },
                        "required": [
                          "type"
                        ]
                      },
                      "then": {
                        "properties": {
                          "properties": {
                            "$ref": "trait-schema-volumes-schema.json"
                          }
                        }
                      }
                    }
                  ],
                  "description": "An operational capability attached to a component (e.g. ingress, scaler, resource limits).",
                  "properties": {
                    "properties": {
                      "description": "Trait-specific properties. Set 'type' first, then use Ctrl+Space here.",
                      "type": "object"
                    },
                    "type": {
                      "description": "The trait definition type. Controls which 'properties' are valid.",
                      "enum": [
                        "affinity",
                        "annotations",
                        "command",
                        "configmap",
                        "container-image",
                        "container-ports",
                        "cpuscaler",
                        "env",
                        "expose",
                        "gateway",
                        "hostalias",
                        "hpa",
                        "ingress",
                        "ingress-1-20",
                        "init-container",
                        "json-merge-patch",
                        "json-patch",
                        "k8s-update-strategy",
                        "labels",
                        "lifecycle",
                        "nocalhost",
                        "node-affinity",
                        "podsecuritycontext",
                        "pure-ingress",
                        "pvc",
                        "resource",
                        "scaler",
                        "securitycontext",
                        "service-account",
                        "service-binding",
                        "sidecar",
                        "startup-probe",
                        "storage",
                        "topologyspreadconstraints",
                        "volumes"
                      ],
                      "type": "string"
                    }
                  },
                  "required": [
                    "type"
                  ],
                  "type": "object"
                },
                "type": "array"
              },
              "type": {
                "description": "The component definition type. Controls which 'properties' are valid. Use Ctrl+Space to see all options.",
                "enum": [
                  "cron-task",
                  "daemon",
                  "k8s-objects",
                  "raw",
                  "ref-objects",
                  "statefulset",
                  "task",
                  "webservice",
                  "worker"
                ],
                "type": "string"
              }
            },
            "required": [
              "name",
              "type"
            ],
            "type": "object"
          },
          "type": "array"
        },
        "policies": {
          "description": "Application-level policies such as topology, override, garbage-collect.",
          "items": {
            "allOf": [
              {
                "if": {
                  "properties": {
                    "type": {
                      "const": "apply-once"
                    }
                  },
                  "required": [
                    "type"
                  ]
                },
                "then": {
                  "properties": {
                    "properties": {
                      "$ref": "policy-schema-apply-once-schema.json"
                    }
                  }
                }
              },
              {
                "if": {
                  "properties": {
                    "type": {
                      "const": "envbinding"
                    }
                  },
                  "required": [
                    "type"
                  ]
                },
                "then": {
                  "properties": {
                    "properties": {
                      "$ref": "policy-schema-envbinding-schema.json"
                    }
                  }
                }
              },
              {
                "if": {
                  "properties": {
                    "type": {
                      "const": "garbage-collect"
                    }
                  },
                  "required": [
                    "type"
                  ]
                },
                "then": {
                  "properties": {
                    "properties": {
                      "$ref": "policy-schema-garbage-collect-schema.json"
                    }
                  }
                }
              },
              {
                "if": {
                  "properties": {
                    "type": {
                      "const": "override"
                    }
                  },
                  "required": [
                    "type"
                  ]
                },
                "then": {
                  "properties": {
                    "properties": {
                      "$ref": "policy-schema-override-schema.json"
                    }
                  }
                }
              },
              {
                "if": {
                  "properties": {
                    "type": {
                      "const": "read-only"
                    }
                  },
                  "required": [
                    "type"
                  ]
                },
                "then": {
                  "properties": {
                    "properties": {
                      "$ref": "policy-schema-read-only-schema.json"
                    }
                  }
                }
              },
              {
                "if": {
                  "properties": {
                    "type": {
                      "const": "replication"
                    }
                  },
                  "required": [
                    "type"
                  ]
                },
                "then": {
                  "properties": {
                    "properties": {
                      "$ref": "policy-schema-replication-schema.json"
                    }
                  }
                }
              },
              {
                "if": {
                  "properties": {
                    "type": {
                      "const": "resource-update"
                    }
                  },
                  "required": [
                    "type"
                  ]
                },
                "then": {
                  "properties": {
                    "properties": {
                      "$ref": "policy-schema-resource-update-schema.json"
                    }
                  }
                }
              },
              {
                "if": {
                  "properties": {
                    "type": {
                      "const": "shared-resource"
                    }
                  },
                  "required": [
                    "type"
                  ]
                },
                "then": {
                  "properties": {
                    "properties": {
                      "$ref": "policy-schema-shared-resource-schema.json"
                    }
                  }
                }
              },
              {
                "if": {
                  "properties": {
                    "type": {
                      "const": "take-over"
                    }
                  },
                  "required": [
                    "type"
                  ]
                },
                "then": {
                  "properties": {
                    "properties": {
                      "$ref": "policy-schema-take-over-schema.json"
                    }
                  }
                }
              },
              {
                "if": {
                  "properties": {
                    "type": {
                      "const": "topology"
                    }
                  },
                  "required": [
                    "type"
                  ]
                },
                "then": {
                  "properties": {
                    "properties": {
                      "$ref": "policy-schema-topology-schema.json"
                    }
                  }
                }
              }
            ],
            "description": "An application-level policy (e.g. override, topology, garbage-collect).",
            "properties": {
              "name": {
                "description": "A unique name for this policy.",
                "type": "string"
              },
              "properties": {
                "description": "Policy-specific properties. Set 'type' first, then Ctrl+Space here.",
                "type": "object"
              },
              "type": {
                "description": "The policy type. Controls which 'properties' are valid.",
                "enum": [
                  "apply-once",
                  "envbinding",
                  "garbage-collect",
                  "override",
                  "read-only",
                  "replication",
                  "resource-update",
                  "shared-resource",
                  "take-over",
                  "topology"
                ],
                "type": "string"
              }
            },
            "required": [
              "name",
              "type"
            ],
            "type": "object"
          },
          "type": "array"
        },
        "workflow": {
          "description": "Custom deployment workflow. If omitted, KubeVela deploys all components in parallel.",
          "properties": {
            "mode": {
              "description": "Execution mode for the workflow steps.",
              "properties": {
                "steps": {
                  "description": "Top-level step execution order. DAG = parallel where possible, StepByStep = sequential.",
                  "enum": [
                    "DAG",
                    "StepByStep"
                  ],
                  "type": "string"
                },
                "subSteps": {
                  "description": "Execution order for steps inside a step-group.",
                  "enum": [
                    "DAG",
                    "StepByStep"
                  ],
                  "type": "string"
                }
              },
              "type": "object"
            },
            "steps": {
              "description": "Ordered list of workflow steps.",
              "items": {
                "allOf": [
                  {
                    "if": {
                      "properties": {
                        "type": {
                          "const": "apply-application"
                        }
                      },
                      "required": [
                        "type"
                      ]
                    },
                    "then": {
                      "properties": {
                        "properties": {
                          "$ref": "workflowstep-schema-apply-application-schema.json"
                        }
                      }
                    }
                  },
                  {
                    "if": {
                      "properties": {
                        "type": {
                          "const": "apply-application-in-parallel"
                        }
                      },
                      "required": [
                        "type"
                      ]
                    },
                    "then": {
                      "properties": {
                        "properties": {
                          "$ref": "workflowstep-schema-apply-application-in-parallel-schema.json"
                        }
                      }
                    }
                  },
                  {
                    "if": {
                      "properties": {
                        "type": {
                          "const": "apply-component"
                        }
                      },
                      "required": [
                        "type"
                      ]
                    },
                    "then": {
                      "properties": {
                        "properties": {
                          "$ref": "workflowstep-schema-apply-component-schema.json"
                        }
                      }
                    }
                  },
                  {
                    "if": {
                      "properties": {
                        "type": {
                          "const": "apply-deployment"
                        }
                      },
                      "required": [
                        "type"
                      ]
                    },
                    "then": {
                      "properties": {
                        "properties": {
                          "$ref": "workflowstep-schema-apply-deployment-schema.json"
                        }
                      }
                    }
                  },
                  {
                    "if": {
                      "properties": {
                        "type": {
                          "const": "apply-object"
                        }
                      },
                      "required": [
                        "type"
                      ]
                    },
                    "then": {
                      "properties": {
                        "properties": {
                          "$ref": "workflowstep-schema-apply-object-schema.json"
                        }
                      }
                    }
                  },
                  {
                    "if": {
                      "properties": {
                        "type": {
                          "const": "apply-remaining"
                        }
                      },
                      "required": [
                        "type"
                      ]
                    },
                    "then": {
                      "properties": {
                        "properties": {
                          "$ref": "workflowstep-schema-apply-remaining-schema.json"
                        }
                      }
                    }
                  },
                  {
                    "if": {
                      "properties": {
                        "type": {
                          "const": "apply-terraform-config"
                        }
                      },
                      "required": [
                        "type"
                      ]
                    },
                    "then": {
                      "properties": {
                        "properties": {
                          "$ref": "workflowstep-schema-apply-terraform-config-schema.json"
                        }
                      }
                    }
                  },
                  {
                    "if": {
                      "properties": {
                        "type": {
                          "const": "build-push-image"
                        }
                      },
                      "required": [
                        "type"
                      ]
                    },
                    "then": {
                      "properties": {
                        "properties": {
                          "$ref": "workflowstep-schema-build-push-image-schema.json"
                        }
                      }
                    }
                  },
                  {
                    "if": {
                      "properties": {
                        "type": {
                          "const": "check-metrics"
                        }
                      },
                      "required": [
                        "type"
                      ]
                    },
                    "then": {
                      "properties": {
                        "properties": {
                          "$ref": "workflowstep-schema-check-metrics-schema.json"
                        }
                      }
                    }
                  },
                  {
                    "if": {
                      "properties": {
                        "type": {
                          "const": "clean-jobs"
                        }
                      },
                      "required": [
                        "type"
                      ]
                    },
                    "then": {
                      "properties": {
                        "properties": {
                          "$ref": "workflowstep-schema-clean-jobs-schema.json"
                        }
                      }
                    }
                  },
                  {
                    "if": {
                      "properties": {
                        "type": {
                          "const": "collect-service-endpoints"
                        }
                      },
                      "required": [
                        "type"
                      ]
                    },
                    "then": {
                      "properties": {
                        "properties": {
                          "$ref": "workflowstep-schema-collect-service-endpoints-schema.json"
                        }
                      }
                    }
                  },
                  {
                    "if": {
                      "properties": {
                        "type": {
                          "const": "create-config"
                        }
                      },
                      "required": [
                        "type"
                      ]
                    },
                    "then": {
                      "properties": {
                        "properties": {
                          "$ref": "workflowstep-schema-create-config-schema.json"
                        }
                      }
                    }
                  },
                  {
                    "if": {
                      "properties": {
                        "type": {
                          "const": "delete-config"
                        }
                      },
                      "required": [
                        "type"
                      ]
                    },
                    "then": {
                      "properties": {
                        "properties": {
                          "$ref": "workflowstep-schema-delete-config-schema.json"
                        }
                      }
                    }
                  },
                  {
                    "if": {
                      "properties": {
                        "type": {
                          "const": "depends-on-app"
                        }
                      },
                      "required": [
                        "type"
                      ]
                    },
                    "then": {
                      "properties": {
                        "properties": {
                          "$ref": "workflowstep-schema-depends-on-app-schema.json"
                        }
                      }
                    }
                  },
                  {
                    "if": {
                      "properties": {
                        "type": {
                          "const": "deploy"
                        }
                      },
                      "required": [
                        "type"
                      ]
                    },
                    "then": {
                      "properties": {
                        "properties": {
                          "$ref": "workflowstep-schema-deploy-schema.json"
                        }
                      }
                    }
                  },
                  {
                    "if": {
                      "properties": {
                        "type": {
                          "const": "deploy-cloud-resource"
                        }
                      },
                      "required": [
                        "type"
                      ]
                    },
                    "then": {
                      "properties": {
                        "properties": {
                          "$ref": "workflowstep-schema-deploy-cloud-resource-schema.json"
                        }
                      }
                    }
                  },
                  {
                    "if": {
                      "properties": {
                        "type": {
                          "const": "deploy2env"
                        }
                      },
                      "required": [
                        "type"
                      ]
                    },
                    "then": {
                      "properties": {
                        "properties": {
                          "$ref": "workflowstep-schema-deploy2env-schema.json"
                        }
                      }
                    }
                  },
                  {
                    "if": {
                      "properties": {
                        "type": {
                          "const": "deploy2runtime"
                        }
                      },
                      "required": [
                        "type"
                      ]
                    },
                    "then": {
                      "properties": {
                        "properties": {
                          "$ref": "workflowstep-schema-deploy2runtime-schema.json"
                        }
                      }
                    }
                  },
                  {
                    "if": {
                      "properties": {
                        "type": {
                          "const": "export-data"
                        }
                      },
                      "required": [
                        "type"
                      ]
                    },
                    "then": {
                      "properties": {
                        "properties": {
                          "$ref": "workflowstep-schema-export-data-schema.json"
                        }
                      }
                    }
                  },
                  {
                    "if": {
                      "properties": {
                        "type": {
                          "const": "export-service"
                        }
                      },
                      "required": [
                        "type"
                      ]
                    },
                    "then": {
                      "properties": {
                        "properties": {
                          "$ref": "workflowstep-schema-export-service-schema.json"
                        }
                      }
                    }
                  },
                  {
                    "if": {
                      "properties": {
                        "type": {
                          "const": "export2config"
                        }
                      },
                      "required": [
                        "type"
                      ]
                    },
                    "then": {
                      "properties": {
                        "properties": {
                          "$ref": "workflowstep-schema-export2config-schema.json"
                        }
                      }
                    }
                  },
                  {
                    "if": {
                      "properties": {
                        "type": {
                          "const": "export2secret"
                        }
                      },
                      "required": [
                        "type"
                      ]
                    },
                    "then": {
                      "properties": {
                        "properties": {
                          "$ref": "workflowstep-schema-export2secret-schema.json"
                        }
                      }
                    }
                  },
                  {
                    "if": {
                      "properties": {
                        "type": {
                          "const": "generate-jdbc-connection"
                        }
                      },
                      "required": [
                        "type"
                      ]
                    },
                    "then": {
                      "properties": {
                        "properties": {
                          "$ref": "workflowstep-schema-generate-jdbc-connection-schema.json"
                        }
                      }
                    }
                  },
                  {
                    "if": {
                      "properties": {
                        "type": {
                          "const": "list-config"
                        }
                      },
                      "required": [
                        "type"
                      ]
                    },
                    "then": {
                      "properties": {
                        "properties": {
                          "$ref": "workflowstep-schema-list-config-schema.json"
                        }
                      }
                    }
                  },
                  {
                    "if": {
                      "properties": {
                        "type": {
                          "const": "notification"
                        }
                      },
                      "required": [
                        "type"
                      ]
                    },
                    "then": {
                      "properties": {
                        "properties": {
                          "$ref": "workflowstep-schema-notification-schema.json"
                        }
                      }
                    }
                  },
                  {
                    "if": {
                      "properties": {
                        "type": {
                          "const": "print-message-in-status"
                        }
                      },
                      "required": [
                        "type"
                      ]
                    },
                    "then": {
                      "properties": {
                        "properties": {
                          "$ref": "workflowstep-schema-print-message-in-status-schema.json"
                        }
                      }
                    }
                  },
                  {
                    "if": {
                      "properties": {
                        "type": {
                          "const": "read-config"
                        }
                      },
                      "required": [
                        "type"
                      ]
                    },
                    "then": {
                      "properties": {
                        "properties": {
                          "$ref": "workflowstep-schema-read-config-schema.json"
                        }
                      }
                    }
                  },
                  {
                    "if": {
                      "properties": {
                        "type": {
                          "const": "read-object"
                        }
                      },
                      "required": [
                        "type"
                      ]
                    },
                    "then": {
                      "properties": {
                        "properties": {
                          "$ref": "workflowstep-schema-read-object-schema.json"
                        }
                      }
                    }
                  },
                  {
                    "if": {
                      "properties": {
                        "type": {
                          "const": "request"
                        }
                      },
                      "required": [
                        "type"
                      ]
                    },
                    "then": {
                      "properties": {
                        "properties": {
                          "$ref": "workflowstep-schema-request-schema.json"
                        }
                      }
                    }
                  },
                  {
                    "if": {
                      "properties": {
                        "type": {
                          "const": "share-cloud-resource"
                        }
                      },
                      "required": [
                        "type"
                      ]
                    },
                    "then": {
                      "properties": {
                        "properties": {
                          "$ref": "workflowstep-schema-share-cloud-resource-schema.json"
                        }
                      }
                    }
                  },
                  {
                    "if": {
                      "properties": {
                        "type": {
                          "const": "step-group"
                        }
                      },
                      "required": [
                        "type"
                      ]
                    },
                    "then": {
                      "properties": {
                        "properties": {
                          "$ref": "workflowstep-schema-step-group-schema.json"
                        }
                      }
                    }
                  },
                  {
                    "if": {
                      "properties": {
                        "type": {
                          "const": "suspend"
                        }
                      },
                      "required": [
                        "type"
                      ]
                    },
                    "then": {
                      "properties": {
                        "properties": {
                          "$ref": "workflowstep-schema-suspend-schema.json"
                        }
                      }
                    }
                  },
                  {
                    "if": {
                      "properties": {
                        "type": {
                          "const": "vela-cli"
                        }
                      },
                      "required": [
                        "type"
                      ]
                    },
                    "then": {
                      "properties": {
                        "properties": {
                          "$ref": "workflowstep-schema-vela-cli-schema.json"
                        }
                      }
                    }
                  },
                  {
                    "if": {
                      "properties": {
                        "type": {
                          "const": "webhook"
                        }
                      },
                      "required": [
                        "type"
                      ]
                    },
                    "then": {
                      "properties": {
                        "properties": {
                          "$ref": "workflowstep-schema-webhook-schema.json"
                        }
                      }
                    }
                  }
                ],
                "description": "A single step in the application deployment workflow.",
                "properties": {
                  "dependsOn": {
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  },
                  "if": {
                    "description": "A CUE expression. If false, this step is skipped.",
                    "type": "string"
                  },
                  "inputs": {
                    "type": "array"
                  },
                  "name": {
                    "description": "A unique name for this workflow step.",
                    "type": "string"
                  },
                  "outputs": {
                    "type": "array"
                  },
                  "properties": {
                    "description": "Step-specific properties. Set 'type' first, then Ctrl+Space here.",
                    "type": "object"
                  },
                  "timeout": {
                    "description": "Maximum time to wait for this step, e.g. '10m'.",
                    "type": "string"
                  },
                  "type": {
                    "description": "The workflow step type. Controls which 'properties' are valid.",
                    "enum": [
                      "apply-application",
                      "apply-application-in-parallel",
                      "apply-component",
                      "apply-deployment",
                      "apply-object",
                      "apply-remaining",
                      "apply-terraform-config",
                      "build-push-image",
                      "check-metrics",
                      "clean-jobs",
                      "collect-service-endpoints",
                      "create-config",
                      "delete-config",
                      "depends-on-app",
                      "deploy",
                      "deploy-cloud-resource",
                      "deploy2env",
                      "deploy2runtime",
                      "export-data",
                      "export-service",
                      "export2config",
                      "export2secret",
                      "generate-jdbc-connection",
                      "list-config",
                      "notification",
                      "print-message-in-status",
                      "read-config",
                      "read-object",
                      "request",
                      "share-cloud-resource",
                      "step-group",
                      "suspend",
                      "vela-cli",
                      "webhook"
                    ],
                    "type": "string"
                  }
                },
                "required": [
                  "name",
                  "type"
                ],
                "type": "object"
              },
              "type": "array"
            }
          },
          "type": "object"
        }
      },
      "required": [
        "components"
      ],
      "type": "object"
    }
  },
  "required": [
    "apiVersion",
    "kind",
    "metadata",
    "spec"
  ],
  "title": "KubeVela Application",
  "type": "object"
}